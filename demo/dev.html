<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @media (prefers-color-scheme: dark) {
            body{
                background-color: black;
            }
        }
    </style>
</head>
<body>
    
    <navigate-trait>
        <un-curl></un-curl>
        <script nomodule="ish">
            const accountId = Symbol('accountId');
            const statementId = Symbol('statementId');
            const statementPageNo = Symbol('statementPageNo');
            const transactionsFrom = Symbol('transactionsFrom');
            const transactionsTo = Symbol('transactionsTo');
            const routeMap = {
                myAccounts:{
                    '*': [accountId, parseInt, x => x % 11 === 0, {
                        statements:{
                            '*' : [statementId,,,{
                                '?': {
                                    page: [statementPageNo, parseInt]
                                }
                            }]
                        },
                        transactions:{
                            '?':{
                                from: [transactionsFrom, parseDate],
                                to: [transactionsTo, parseDate]
                            }
                        }
                    }],

                }
            }
            const historyUpdate = {
                myContext:{
                    mySubContext:{
                        accountInfo:{
                            id: [accountId],
                            statementInfo:{
                                id: [statementId]
                            },
                            statementView:{
                                pageNo: [statementPageNo]
                            }
                        },
                        transactionsView:{
                            from: [transactionsFrom],
                            to: [transactionsTo]
                        }
                    }
                    
                }
            }
            Object.assign(selfish.parentElement, {routeMap, historyUpdate});
        </script>
    </navigate-trait>

    <nav id=test be-a-client-side-router>
        <a  be-a-navigation-link href="myAccounts/14394402/statements/201904?page=1" slot="link">
            Statement for April 2019
        </a>
        <a be-a-navigation-link href="myAccounts/398821400/transactions?from=2020-10-01&to=2020-11-19" slot="link">
            Transactions for 10/1/2020 - 11/19/2020
        </a>
    </nav>
    <script type=module>
        import('../un-curl.js');
        import('../navigate-trait.js');
    </script>
    <!-- <script>
        test.addEventListener('route-change', e => {
            console.log(e);
        }, true);
    </script> -->
</body>
</html>